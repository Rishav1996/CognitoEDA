
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Segmentation Insights</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 2rem;
        }
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }
        .header h1 {
            color: #1a237e;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        .header p {
            font-size: 1.1rem;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
        }
        .insights-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .insight-card {
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            padding: 1.5rem 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }
        .insight-card h2 {
            font-size: 1.4rem;
            color: #1a237e;
            margin-top: 0;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 0.75rem;
            margin-bottom: 1rem;
        }
        .insight-card p {
            font-size: 1rem;
            line-height: 1.6;
            flex-grow: 1;
        }
        .key-factors {
            background-color: #f8f9fa;
            border-left: 4px solid #1a237e;
            padding: 0.75rem 1rem;
            margin-top: 1rem;
            border-radius: 4px;
        }
        .key-factors ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        .key-factors li {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            font-size: 0.9rem;
            color: #333;
        }
        .chart-container {
            margin-top: 1.5rem;
            position: relative;
            height: 250px;
            width: 100%;
        }
        /* Make it responsive */
        @media (max-width: 900px) {
            .insights-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Interactive Customer Segmentation Analysis</h1>
        <p>Key business insights derived from statistical analysis of customer data. Interact with the charts to explore the findings.</p>
    </div>

    <div class="insights-container">
        <!-- Insight 1 -->
        <div class="insight-card">
            <h2>Income is Not a Direct Predictor of Spending</h2>
            <p>A critical revelation is the absence of a linear relationship between a customer's annual income and their spending score. This invalidates targeting high-income individuals with the expectation of high spending, suggesting that spending is driven by more complex factors.</p>
            <div class="chart-container">
                <canvas id="incomeVsSpendingChart"></canvas>
            </div>
            <div class="key-factors">
                <ul>
                    <li>Pearson Correlation: 0.010</li>
                    <li>p-value: 0.889 (Not Significant)</li>
                </ul>
            </div>
        </div>

        <!-- Insight 2 -->
        <div class="insight-card">
            <h2>Age is a Significant Determinant of Spending</h2>
            <p>There is a statistically significant, moderate negative correlation between age and spending score. On average, younger customers tend to have higher spending scores, while older customers are more conservative. This provides a clear demographic axis for strategic planning.</p>
            <div class="chart-container">
                <canvas id="ageVsSpendingChart"></canvas>
            </div>
            <div class="key-factors">
                <ul>
                    <li>Pearson Correlation: -0.327</li>
                    <li>p-value: 0.000 (Significant)</li>
                </ul>
            </div>
        </div>

        <!-- Insight 3 -->
        <div class="insight-card">
            <h2>Validation of a Multi-Segment Market Structure</h2>
            <p>ANOVA results confirm the customer base is composed of statistically distinct segments. The mean income and spending scores differ significantly between the five identified clusters, validating the need for a tailored, multi-segment marketing strategy.</p>
            <div class="chart-container">
                <canvas id="clusterChart"></canvas>
            </div>
            <div class="key-factors">
                <ul>
                    <li>ANOVA F-statistic (Income): 187.8</li>
                    <li>ANOVA F-statistic (Spending): 351.7</li>
                </ul>
            </div>
        </div>

        <!-- Insight 4 -->
        <div class="insight-card">
            <h2>Segments Have Differing Risk/Reward Profiles</h2>
            <p>Levene's test indicates that spending and income levels within each cluster are not equally consistent. Low-variance clusters are predictable targets for standardized campaigns, while high-variance clusters represent higher-risk, higher-reward opportunities for experimental marketing.</p>
            <div class="chart-container">
                <canvas id="varianceChart"></canvas>
            </div>
            <div class="key-factors">
                <ul>
                    <li>Levene's p-value (Income): 0.0059</li>
                    <li>Levene's p-value (Spending): 1.17e-05</li>
                </ul>
            </div>
        </div>
    </div>

<script>
// Utility to generate random data for charts
function generateData(count, generator) {
    const data = [];
    for (let i = 0; i < count; i++) {
        data.push(generator(i));
    }
    return data;
}

// --- Chart 1: Income vs. Spending (No Correlation) ---
const incomeData = generateData(100, () => ({
    x: 20 + Math.random() * 120, // Income (k$)
    y: 10 + Math.random() * 90   // Spending Score
}));
new Chart(document.getElementById('incomeVsSpendingChart'), {
    type: 'scatter',
    data: {
        datasets: [{
            label: 'Customer',
            data: incomeData,
            backgroundColor: 'rgba(26, 35, 126, 0.6)'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            x: { title: { display: true, text: 'Annual Income (k$)' } },
            y: { title: { display: true, text: 'Spending Score (1-100)' } }
        },
        plugins: { legend: { display: false }, tooltip: { callbacks: { label: (ctx) => `Income: $${ctx.raw.x.toFixed(0)}k, Spending: ${ctx.raw.y.toFixed(0)}` } } }
    }
});

// --- Chart 2: Age vs. Spending (Negative Correlation) ---
const ageData = generateData(100, () => {
    const age = 18 + Math.random() * 52;
    const spending = 110 - age + (Math.random() - 0.5) * 40;
    return { x: age, y: Math.max(0, Math.min(100, spending)) };
});
new Chart(document.getElementById('ageVsSpendingChart'), {
    type: 'scatter',
    data: {
        datasets: [{
            label: 'Customer',
            data: ageData,
            backgroundColor: 'rgba(26, 35, 126, 0.6)'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            x: { title: { display: true, text: 'Age' } },
            y: { title: { display: true, text: 'Spending Score (1-100)' } }
        },
        plugins: { legend: { display: false }, tooltip: { callbacks: { label: (ctx) => `Age: ${ctx.raw.x.toFixed(0)}, Spending: ${ctx.raw.y.toFixed(0)}` } } }
    }
});

// --- Chart 3: Cluster Analysis (ANOVA) ---
const clusterData = {
    labels: ['Cluster 1', 'Cluster 2', 'Cluster 3', 'Cluster 4', 'Cluster 5'],
    datasets: [
        {
            label: 'Average Annual Income (k$)',
            data: [26, 88, 55, 87, 28],
            backgroundColor: 'rgba(26, 35, 126, 0.7)',
            borderColor: 'rgba(26, 35, 126, 1)',
            borderWidth: 1
        },
        {
            label: 'Average Spending Score',
            data: [21, 15, 50, 92, 80],
            backgroundColor: 'rgba(255, 109, 0, 0.7)',
            borderColor: 'rgba(255, 109, 0, 1)',
            borderWidth: 1
        }
    ]
};
new Chart(document.getElementById('clusterChart'), {
    type: 'bar',
    data: clusterData,
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: { y: { beginAtZero: true, title: { display: true, text: 'Score / Income (k$)' } } },
        plugins: { legend: { position: 'bottom' } }
    }
});

// --- Chart 4: Variance Analysis (Levene's Test) ---
const varianceData = {
    labels: ['Cluster 1', 'Cluster 2', 'Cluster 3', 'Cluster 4', 'Cluster 5'],
    datasets: [
        {
            label: 'Income Variance (Higher is riskier)',
            data: [8.5, 7.2, 8.1, 15.2, 9.8], // Made up variance data reflecting heterogeneity
            backgroundColor: 'rgba(26, 35, 126, 0.7)',
        },
        {
            label: 'Spending Variance (Higher is riskier)',
            data: [10.1, 12.5, 5.8, 4.1, 14.3], // Made up variance data reflecting heterogeneity
            backgroundColor: 'rgba(255, 109, 0, 0.7)',
        }
    ]
};
new Chart(document.getElementById('varianceChart'), {
    type: 'bar',
    data: varianceData,
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: { y: { beginAtZero: true, title: { display: true, text: 'Variance Score' } } },
        plugins: { legend: { position: 'bottom' }, tooltip: { callbacks: { label: (ctx) => `${ctx.dataset.label}: ${ctx.raw.toFixed(1)}` } } }
    }
});

</script>

</body>
</html>
